<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
<title>Login Page</title>
<!--Fontawesome CDN-->
<link rel="stylesheet" href="/webjars/bootstrap/4.1.3/css/bootstrap.min.css" />
<script src="/webjars/jquery/3.1.1/jquery.min.js"></script>
<script src="/webjars/bootstrap/4.1.3/js/bootstrap.min.js"></script>
<link rel="stylesheet" href="/css/member/common/all.css">
<link rel="stylesheet" href="/css/member/join/join.css">

<script type="text/javascript">
$(document).ready(function(){
	$("#joinForm").submit((e)=>{
		let pass = $("#password");
		let pass2 = $("#password2");
		let email = $("#email").val();
		if(pass.val()!=pass2.val()){
			$("#error").show().html("패스워드 확인 요청");
			pass.val('').focus();
			pass2.val('');
			e.preventDefault();
		}
		//중복계정 체크하는 로직
		$.ajax({
			  url: "/apis/member/findUserByIdAjax",
			  method: "POST",
			  async : false,
			  data: { email: email}
		})
		.done(function( user ) {
			if(user){
				$("#error").show().html("이미 존재하는 계정입니다.");
				pass.val('');
				pass2.val('');
				e.preventDefault();
			}
		});

	});
	
	$("#password2").keyup((e)=>{
		let pass = $("#password").val();
		let value = e.target.value;
		$("#error").show().html("패스워드 확인 요청");
		if(pass === value){
			$("#error").hide();
		}
	});
});
</script>
</head>
<body>
<br>
	<!--container start.//-->
	<div class="container">
		<!-- card.// -->
		<div class="card bg-light">
			<article class="card-body mx-auto" style="max-width: 400px;">
				<h4 class="card-title mt-3 text-center">Create Account</h4>
				<p class="text-center">Get started with your free account</p>
				<form id="joinForm" action="/member/join" method="post">
					<div class="form-group input-group">
						<div class="input-group-prepend">
							<span class="input-group-text"> <i class="fa fa-user"></i>
							</span>
						</div>
						<input name="username" class="form-control" placeholder="username" type="text" required="required">
					</div>
					<!-- form-group// -->
					<div class="form-group input-group">
						<div class="input-group-prepend">
							<span class="input-group-text"> <i class="fa fa-envelope"></i>
							</span>
						</div>
						<input name="email" id="email" class="form-control" placeholder="Email address" type="email" required="required">
					</div>
					<!-- form-group// -->
					<div class="form-group input-group">
						<div class="input-group-prepend">
							<span class="input-group-text"> <i class="fa fa-lock"></i>
							</span>
						</div>
						<input name="password" id="password" class="form-control" placeholder="Create password" type="password" required="required">
					</div>
					<!-- form-group// -->
					<div class="form-group input-group">
						<div class="input-group-prepend">
							<span class="input-group-text"> <i class="fa fa-lock"></i>
							</span>
						</div>
						<input name="password2" id="password2" class="form-control" placeholder="Repeat password" type="password" required="required">
					</div>
					<div class="form-group">
						<div id="error" class="alert alert-danger" role="alert" style="display: none;">
						  This is a danger alert—check it out!
						</div>
					</div>
					<div>
					</div>
					<!-- form-group// -->
					<div class="form-group">
						<button type="submit" class="btn btn-primary btn-block">
							Create Account</button>
					</div>
					<!-- form-group// -->
					<p class="text-center">
						Have an account? <a href="/member/login">Sign In</a>
					</p>
				</form>
			</article>
		</div>
		<!-- card.// -->
	</div>
	<!--container end.//-->
</body>
</html>
